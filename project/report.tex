\documentclass[sigconf]{acmart}

\input{format/i523}

\begin{document}
\title{Using Machine Learning Classification of Opioid Addiction
for Big Data Health Analytics}

  \author{Sean M. Shiverick}
  \affiliation{%
  \institution{Indiana University Bloomington}
}
\email{smshiver@indiana.edu}

\renewcommand{\shortauthors}{S.M. Shiverick}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{abstract}
Classification of opioid addiction can help identify features related to 
drug abuse and overdose death. Machine learning procedures were used on data 
from a large National Survey of Drug Use and Health (NSDUH-2015) to classify 
individuals for illicit opioid use according to demographic characteristics 
and mental health attributes (i.e., depression). The classification model of 
opioid addiction could be extended for big data health analytics to include 
data over previous years of the survey, or extending the sample to the larger 
population of patients taking prescription opioid medication. Results from  
this project are intended to raise awareness of risk factors related to 
opioid addiction among patients and medication prescribers, and provide 
information that may help to decrease the risk of opioid overdose and death. 
Different classification methods are discussed.

\end{abstract}

\keywords{Health Analytics, Machine Learning, Classification, Opioid Addiction, 
Big Data, i523, HID335}

\maketitle

\url{url: https://github.com/bigdata-i523/hid335/tree/master/project}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}

Big Data offers tremendous potential to fuel innovation and transform society, 
but can this momentum be harnessed to prevent disease and improve health? 
Health informatics is generating huge amounts of data at a rapid pace, from 
electronic medical records (EMRs), clinical research data, to population-level 
public health data \cite{herland14}. This project explores whether big data 
health analytics can help address the opioid overdose epidemic \cite{cdc16}. 
Health Informatics is considered from two levels: where the data is collected, 
and the research questions being addressed. Public health surveys can provide 
data on a wide range of issues related to substance use, including information 
that individuals may be reluctant to disclose in person, including: personal 
health status, mental health conditions, and illicit drug consumption. Questions 
of interest in this project: \textit{What prescription medications have you used
in the past month, year, life time?}, \textit{What illicit substances have you 
used in the past month, year, life time?} The general idea features associated 
with a susceptibility for the abuse and dependence on prescription medications 
may be influential for classifying illicit opioid use. A limitation of survey 
data is that although there is a high volume and variety of information 
collected, it may be unreliable due to response biases of respondents, leading 
to low veracity. The literature review shows that survey data can be useful for 
obtaining personal health data, but public use data often restricts identifying 
information to protect confidentiality that could be useful for accurate 
classification and prediction. The goal of this project was to examine how 
machine learning procedures can be used to classify individuals susceptible 
to opioid dependence and addiction.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Opioid Overdose Epidemic}

The abuse of prescription opioid medication in the U.S. has become a major 
health crisis of epidemic proportions \cite{volkow14}. Over 2 million Americans 
were dependent on or abused prescription opioids such as oxycodone or 
hydrocodone in 2014 \cite{cdc17}. Overdose deaths from prescription opioids 
have quadrupled since 1999, resulting in more than 180,000 deaths between 1999 
to 2015 \cite{nida17}. Drug overdose death increased significantly for both 
males and females, ages 25-44, 55 years and older, for Non-Hispanic Whites 
and Blacks, in the Norheastern, Midwestern, and Southern areas of the U.S.
\cite{cdc16}. Medication abuse can consist of higher medication dosages or rapid 
escalation of a prescribed dosage. Mobile health applications can help provide 
an early warning system for potential abuse of prescription medication 
\cite{varshney13}. Analytic models can monitor patient data for sudden changes 
in medication consumption; however, it can be difficult to obtain reliable 
information about medication consumption based on self-reports from potentially
addicted individuals. Patients who become dependent and addicted to  
prescription opioid medications may seek to obtain synthetic opioids such as 
fentanyl without a prescription or illicit drugs such as heroin, whose exact 
dosages and potency are uknown, putting them at great risk of drug overdose 
death. Indeed, the sharp increase in overdose deaths due to synthetic opioids 
(other than methadone) has coincided with the increased availability of 
illicitly manufactured fentanyl, which is indistinguishable from prescription 
fentanyl. These findings indicate that the opioid overdose epidemic is getting
worse, and requires urgent action to detect and prevent opioid dependence, 
abuse and death. The general goal of this project is to develop a classification 
model for predicting opioid addiction based on demographic characteristics.  

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Drug Abuse, Dependency, and Addiction}

Drug addiction has many similar characteristics to other chronic medical 
illnesses, but there are unique challenges to the treatment of addiction
\cite{marsch12, swendson16}. In drug rehabilitation treatment programs, 
patients undergo intense detoxification that reduces their drug tolerance, but 
are then released back into the environments associated with their drug use, 
putting them at high risk for relapse and potential drug overdose 
\cite{johnson11}. According to a classical conditioning model of addiction, 
situational cues or events can elicit a motivational state underlying relapse 
to drug use. Addictive behavior can be also be reinstated after extinction of 
dependency by exposure to drug-related cues or stressors in the environment 
\cite{shaham03}. Categorizing or classifying cases of opioid abuse can 
contribute to efforts at addressing the opioid crisis in the following ways: 
(i) Identify factors related to opioid dependency, (ii) Inform consumers of 
opioid medication about relevant risk factors, and (iii) Increase knowledge 
of opioid abuse for more informed decisions by prescribers. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Machine Learning Approaches} 

Machine learning is a set of procedures and automated processes for extracting 
knowledge from data. The two main branches of machine learning are' supervised 
learning and unsupervised learning. Supervised learning is used with problems 
that involve prediction about a specific target variable or outcome of interest. 
If a given dataset has no target outcome, unsupervised learning can be used to 
discover underlying structure in unlabeled data. The goal of this project is 
to classify opioid addiction and focuses on supervised learning. Supervised 
learning is used to predict a certain outcome from a given input, when examples 
of input/output pairs are available \cite{muller17}. A machine learning model 
is constructed from the training set of input-output pairs, to predict new test 
data not previously seen by the model. The two major approaches to supervised 
learning problems are regression and classification. When the target variable 
to be predicted is continuous, or there is continuity between the outcome (e.g., 
home values, or income), a regression model is used to test the set of features 
that predict the target variable. If the target is a class label, set of 
categorical or binary outcomes (e.g., `spam` or `ham`, `benign` or `malignant`), 
then classification is used to predict which class or category label that new 
instances will be assigned to.

\subsection{Classification Algorithms} 
Comparing the performance of different learning algorithms can be helpful for 
selecting the best model for a given problem \cite{raschka17}. One of the 
simplest classification algorithms is K-Nearest-Neighbors (KNN) which takes a 
set of data points and classifies a new data point based on the distance 
(Euclidean by default) to its nearest neighbor(s). The main parameter for KNN
is the number of neighbors, and typically k equal to 3 or 5 works well. KNN is
easy to understand and performs well with little adjustment, but it doe not 
perform well with datasets that have a large number of features (100 or more) 
or data that is sparse. For linear classification models, the decision boundary 
is a linear function of the input; a binary classifier separates two classes 
using along a line, plane, or hyperplane. Algorithms for linear classification 
differ in terms of (1) how they measure how well a particular combination of 
coefficients and intercept fit the training data, and (2) the type of 
regularization used \cite{muller17}. Two common linear classification models 
are logistic regression and support vector machines (SVMs). 


Decision Trees




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Project Goals} 

The data for this project is the 2015 National Survey on Drug Use and Health 
(NSHUH-2015) completed by the U. S. Department of Health and Human Services 
(DHHS), Substance Abuse and Mental Health Services Administration (SAMHSA), 
Center for Behavioral Health Statistics and Quality \cite{samhsa16}. The 
NSDUH-2015 is a comprehensive survey that cover all aspects of substance use, 
misuse, abuse, including questions related to both prescription medications 
(opioids, tranquilizers, sedatives) and illicit drugs (e.g., heroin, cocaine, 
methamphetamine), drug dependency, addiction, and treatment, demographic 
measures of education and employment, physical health, depression, and mental 
health treatment. The goal is to identify the set of features that best 
classifies opioid addiction, defined by lifetime heroin. A machine learning 
classification model will be constructed to classify individuals by heroin 
use according to demographics attributes and mental health characteristics 
(e.g., adult depression). Understanding the features that contribute to 
opioid addiction may help to identify risk factors and increase awareness
of the potential of opioid abuse by patients and health care providers. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Method}

\subsection{Data} 

Data from the 2015 NSHUH was downloaded from the Substance Abuse and Mental 
Health Data Archive (SAMHDA) as a tab separated Excel file \cite{samhsa16}. 
The dataset consists of 57,146 observations with 2,666 features representing 
individual-level responses from a survey of the U.S. population. Sampling was 
weighted across states by population size for a representative distribution 
selected from 6,000 area segments varying in size according to state. The 
sample design used five state sample size groups drawing more heavily from 
the eight states with the largest population (e.g., CA, FL, IL, MI, NY, OH, 
PA, TX) which together account for 48 percent of total U.S. population aged 
12 or older. Given that NSDUH collects highly-sensitive information from 
individuals, all identifying information was collapsed (e.g., age categories)
and state identifiers were removed from the public use file to ensure 
confidentiality. The NSDUH public-use files do not include geographic location, 
or demographic variables related to ethnicity or immigration status. The 
weighted survey screening response rate was 81.94 percent and the weighted
interview response rate was 71.2 percent. The NSDUH-2015 dataset was 
downloaded from the SAMH Data Archive as tab-separated Excel files.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Data Cleaning and Preparation }

\subsubsection{Data Cleaning}
This analysis was completed in a python interactive notebook \cite{data17} 
based on instructions and examples from \emph{Python for Data Analysis}
\cite{mckinney17}. The NSDUH-2015 was loaded into python using Pandas and 
saved as a dataframe object. The dataset was subset by columns to include: 
demographic characteristics (e.g., age category, sex, marital status, education, 
employment status, and category of metropolitan area), measures of physical 
health (e.g., overall health, STDs, Hepatitis, HIV, Cancer, hospitalization), 
mental health (e.g., Adult Depression, Emotional Distress, Suicidal Thoughts, 
Plans), Suicide Attempts, Pain Reliever Medication Use, Misuse, and Abuse
(over the past year, past month), Prescription Opioid Medications Taken in
the Past year (e.g., Hydrocodone, Oxycodone, Tramadol, Morphine, Fentanyl,
Oxymorphone, Demerol, Hydromorphone), Heroin Use, Abuse, and Dependency
(over the past year, past month), Tranquilizer Use, Sedative Use, Cocaine 
Use, Amphetamine and Methamphetamine Use, Hallucinogen Use, Drug Treatment
(e.g., Inpatient, Outpatient, Hospital, Mental Health Clinic, ER, Drug
Treatment Status), and Mental Health Treatment History. A codebook was 
created to provide a complete list of variables included with summaries 
of response categories \cite{codebook17}. Several steps to taken to detect 
and remove inconsistencies in the data \cite{rahm00}: 
\begin{enumerate}
  \item Missing values (i.e., `NaN`) were removed 
  \item Blanks, non-responses, or legitimate skips were recoded to zero 
  (e.g.,`99`, `991`, `993`) 
  \item Dichotomous responses (e.g., ``Yes=1``/``No=2``) were responses to 
  ``No=0``
  \item Categorical variables so the response was consistent with degree 
  (e.g., ``1=low``, ``2=med``, ``3=high``)
   \item Selected variables were renamed for better description (e.g., 
   Adult Major Depressive Episode Lifetime changed from `AMDELT` to `DEPMELT`)
\end{enumerate}

Because the majority of features were represented as dichotomous ``Yes/No`` 
variables, related features were summed to create aggregated variables. For 
example, overall health, STD, Hepatitis, HIV, Cancer, and hospitalization were 
aggregated to create a single health measure. The health measure was recoded
so that higher scores indicated better health. Questions related to depression, 
emotional distress, and suicidal thoughts were summed to create a single 
variable for mental health (`MENTHLTH`) with scores ranging from 0 to 9. 
Responses to pain reliever medication use, misuse, abuse, or dependency, 
were aggregated to create a single variable of pain reliever misuse or abuse
(`PRLMISAB`). All prescription painkiller medications used in the past year
were summed. Similarly, all related responses were summed to create single 
variables for Tranquilizers, Sedatives, Cocaine, Amphetamines, Hallucinogens, 
Drug Treatment, and Mental Health Treatment. The target outcome of interest for 
classification, lifetime heroin use (i.e., ``Have you ever used heroin before, 
at any point in time?``) is a dichotomous variables. The demographic 
characteristics and aggregated variables were subset and saved to a new data 
frame consisting of 22 features and 57,146 observations, which was exported 
to CSV file, titled as `project-data.csv`. 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Results}

\subsection{Exploratory Analysis and Descriptives}




\cite{mckinney17}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Classification Algorithms}

\cite{muller17}


\cite{raschka17}




\cite{vanderplas17}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Discussion}

\subsection{Extension to Big Data}

This classification method could be adopted for big data health analytics by
expanding the suvery to the popluation of patients with prescriptions for 
opioid pain medication and may help to identify individuals at risk for
potentially developing opioid dependency of addiction. 


Additional data from the NSDUH was downloaded from 2012 to 2014

hen trying to integrate data from multiple sources, (4) inconsistencies in coding of attributes or features can be a major source of problems. For example, time stamped data with different date formats (e.g., DD/MM/YY; YY/MM/DD, or MM/DD/YY) would have to be reformatted before being combined. Similarly, different coding for sex (e.g., ‘M’/’F’, ‘0’/’1’, ‘1’,’2’) have to be reconciled when combining multiple data sources. Cleaning big data is a more involved process, with Extraction, Integration, and Aggregation of data from operationalized sources into a data warehouse. In general, there are several phases involved in big data cleaning approaches, including the following:

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Limitations}

Tradeoff between quality and quantity


To be of any use, diverse and often messy raw data has to be sifted through and 
effectively organized for further analysis, and 


there are legitimate questions about the reliability of self report data from survey
research for predicting actual behavior. 

The question of 
Value evaluates the quality of the data as it pertains to intended outcomes, such 
as limiting the spread of contagion and disease prevention. 

An important challenge for making sense of big data is developing analytic 
tools adequate to handle large volumes of data in real time.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Dynamics of Epidemic Spreading}

Epidemic spreading is a complex phenomenon based on contact networks between 
individuals and distributed by transportation networks \cite{Colizza06}.

The dynamics of epidemic spreading is a complex phenomenon, based on contact 
networks of person-to-person interaction, indirect exposure, and transmission 
byways such as the {\it airline transportation network} (ATN) \cite{Colizza06}. 
Epidemics are quantified in terms of the proportion of the population infected, 
those yet to be infected, and the rate of transmission \cite{hethcote00}. In 
addition, the structure of the contact network can influence epidemic spreading 
\cite{pastor01}. For example, in the case of simple contagion, weak ties among 
acquaintances or infrequent associations provide shortcuts between distant nodes 
that reduce distance within the network \cite{granovetter73} and can facilitate 
the spread of disease. 

Furthermore, networks with ``small world'' properties have many nodes with 
few connections, but a small number of highly connected nodes that can rapidly 
transmit contagion throughout the network \cite{watts98}. Analyzing the 
correlation between Twitter posts and rate of ILI reports does not capture the 
complex network structure that underlies disease epidemics and pandemics. 
It is possible that by analyzing the structure of social media networks, 

future research may help to identify how points of connection within online
networks are associated with the spread of contagion and resulting epidemics 
\cite{zhu17}. Some epidemics such as the opioid crisis in North America 
\cite{volkow14} may be amenable to social network modeling as drug usage, 
dependancy, and addiction is subserved by social networks. The emergence of 
new technologies, such as wearable biosensors \cite{carreiro15} may help 
improve geospatial mapping of the opioid epidemics and treatment interventions.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Conclusion}

Machine learning classification of opioid abuse can contribute to efforts to address prescription opioid addiction, overdoses, in the following ways: 
\begin{enumerate}
\item Identify factors related to opioid dependency
\item Inform consumers of opioid medication as to risk factors 
\item Increase knowledge of opioid abuse for more informed prescriptions. 
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{figures}

In Figure \ref{f:fly} we show a fly. Please note that because we use
just columwidth that the size of the figure will change to the
columnwidth of the paper once we change the layout to final. 

Figure \ref{f:Figure1} 

\begin{figure}[!ht]
  \centering\includegraphics[width=\columnwidth]{images/Figure1.pdf}
  \caption{Drug overdose deaths involving opioids by type of opioid in U.S. 2000-2014
  \cite{cdc16}}
  \label{f:Figure1}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Tables}

%Table\ref{t:mytable}. 

\begin{table}
  \caption{Summary of Participant Characteristics in Pilot study \cite{carreiro15}}
  \label{tab:freq}
  \begin{tabular}{ccccccc}
    \toprule
     Patient& Age& Gender& History of Use& Intervention& Pre-EDA& Post-EDA \\
    \midrule
    1& 82& Male& Opioid naive& 4 mg morphine& 4.5& 60.0 \\
    2& 47& Male& Recent short-term& 1 mg hydromorphone& 3.4& 12.2 \\
    3& 43& Female& Chronic opioid use& 1 mg hydromorphone& 0.2& 0.2 \\
    4& 72& Male& Chronic opioid use& 4 mg morphine& 0.9& 1.6 \\
    \bottomrule
  \end{tabular}
\end{table}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{acks}

  The author would like to thank Dr. Gregor von Laszewski, 
  the Assistant Instructors, Juliette Zurick, Miao Zheng,
  and others who helped to improve this project and report.

\end{acks}

\bibliographystyle{ACM-Reference-Format}
\bibliography{report} 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\appendix

\section{Code References}
References used in data cleaning and preparation, exploratory analysis, 
visualization, classification model construction and evaluation are documented
here as well as included in comments in the jupyter notebooks 
\cite{muller17,mckinney17,vanderplas17}

Appendix of common issues: 

%\begin{enumerate}

%\item Do not to use the underscore in bibtex labels
%\item Address each of the items in the issues.tex file  and verify you have done them. 
%item Please do this only at the end once you have finished writing the paper. 
%\item Change `TODO` with `DONE`. 

%\end{enumerate}

%\input{issues}

\end{document}
